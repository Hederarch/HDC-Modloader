# Hyperspace Deck Command Modding
This is an unofficial repository collecting information for reverse-engineering and modifying Hyperspace Deck Command by Sleeper Games. 
For now, most activity should be contained to the [wiki](https://github.com/Hederarch/HDC-Modloader/wiki) page as this is still in very exploratory phases.

## Rules
As per an official statement by Sleeper Games, modding must not:
- Distribute or allow the distribution of copies of HDC
  - It's a very cheap game by a very small developer. Piracy is not justifiable or desirable here.
- Publicly upload game assets or code
  - See above. 
- Violate the Sleeper Games Code of Conduct
  - i.e. promote hate speech or discrimination, include adult material, or distribute personal information
- Bother Sleeper Games directly.
  - This is a fan project and should be kept among fans. Sleeper Games is busy and is not expected to help.

## File Access (Windows)
A method has been found to access HDC's internal files:

*By Gestahlt*

**\[!] Important Note! The .asar file is auto-generated by GDScript/Electron to produce the executable. It is not intended to be human readable and not written by Sleeper Games directly. Complaints about it being difficult to use or questions about its contents are not the focus here. We are reverse engineering it to develop a formal modloader. \[!]**

### You will need:
- Windows 10/11
- [Visual Studio Code](https://code.visualstudio.com/) (or equivalent editor, though Notepad++ has been producing strange results)
- [Node.js](https://nodejs.org/en/download)
- (Optional) [7Zip](https://www.7-zip.org/download.html) and [this .asar extension](https://www.tc4shell.com/en/7zip/asar/)

### Extracting the .asar file
Open Visual Studio Code in or navigate to the 'resources' directory of the location of your install of HDC
(if you're not in the resources directory already, you can use â€˜cd [directory/folder name]' to move to a directory inside the directory you're currently in and 'cd ..' to move to the directory your current directory is inside of)
Use "asar extract app.asar [subdirectory name]" to extract app.asar into a subdirectory called whatever you choose to replace [directory name] with
<ins>Naming the subdirectory 'app.asar' makes it so that you don't need to repack, the game runs just fine off of a folder pretending to be a .asar file</ins>
(you may first need to run "Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy Unrestricted" in windows powershell as an administrator, I am not sure if this is necessary)

### (Alternative) Extracting with 7-Zip:
Using 7-zip with the asar plugin, it's possible to extract the file without using Visual Studio or even Node.js, simply navigate to the app.asar in your file explorer and use 7-zip to extract it to your desired folder
This method unfortunately doesn't work for repacking app.asar, but since that isn't necessary you can use this method to avoid interacting with console commands

### (Optional) Repacking the .asar file
Ensure that you are still within the 'resources' directory and that everything you want to repack is in a subdirectory of 'resources'
Use "asar pack [subdirectory name] app.asar" to repack everything contained within the subdirectory back into an asar file.

## File Access (Linux)
The Linux method is comparatively simple. This has been performed on Ubuntu 24.04.3, but should work on most systems. You will need the native Linux build in AppImage form (unavailable through Steam 
at time of writing, but purchaseable through itch.io (here)[https://sleeper-games.itch.io/hyperspace-deck-command])

Open a terminal and enter the following command: [absolute path to AppImage] --appimage-extract. For example, `/home/user/Downloads/Hyperspace\ Deck\ Command/Hyperspace\ Deck\ Command.AppImage --appimage-extract`. This will appear to list a series of files in the appimage then exit without doing anything, but it has extracted the files elsewhere. Look for a new folder, `squashfs-root`, in your Home directory. The app.asar is inside the resources folder.

### Extracting the .asar file
Ensure you have npm installed. On Ubuntu, this can be done with `sudo apt install -y nodejs npm` to install natively (the -y flag confirms you approve the installation and can be omitted if you'd like to check first), then `nodejs -v` and `npm -v` to verify they have installed correctly. Once secure, create a new folder in /squashfs-root/resources/ next to the app.asar and extract into it. For example, after making a folder called `HDC_unpack`, change the terminal dirctory to /home/squashfs-root/resources/ and run `npx @electron/asar extract app.asar HDC_unpack`. The .asar is now extracted, with files available in /HDC_unpack/app/
